<!DOCTYPE html>
<html>
<head>
  <title>QR Scanner</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
  <h2>Scan Your QR Code</h2>
  <div id="reader" style="width: 300px;"></div>

  <script>
    const qrScanner = new Html5Qrcode("reader");

    qrScanner.start(
      { facingMode: "environment" }, // rear camera
      { fps: 10, qrbox: 250 },
      (decodedText, decodedResult) => {
        console.log("QR Code detected:", decodedText);
        window.location.href = decodedText; // redirect to /verify/:token
      },
      (errorMessage) => {
        // Ignore errors
      }
    ).catch(err => {
      console.error("Unable to start scanning:", err);
    });
  </script>
</body>
</html>
